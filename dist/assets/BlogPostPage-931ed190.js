import{c as b,r as d,j as e,B as u,n as _,H as N,o as k,L as C,s as f}from"./index-41fdcd60.js";import{P as M}from"./PageHeader-e3a9be96.js";import{f as j}from"./format-8d28430c.js";import"./differenceInCalendarDays-6447d4da.js";const P=b("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),S=b("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),$=({url:i,title:t,imageUrl:m})=>{const o=encodeURIComponent(i),l=encodeURIComponent(t||""),s=encodeURIComponent(m||""),a=encodeURIComponent(t||"");return{facebook:`https://www.facebook.com/sharer/sharer.php?u=${o}`,twitter:`https://twitter.com/intent/tweet?url=${o}&text=${l}`,pinterest:`https://pinterest.com/pin/create/button/?url=${o}&media=${s}&description=${a}`,whatsapp:`https://wa.me/?text=${l}%20${o}`}},L=({title:i,url:t,imageUrl:m})=>{const[o,l]=d.useState(!1),s=d.useMemo(()=>typeof t=="string"&&t.trim()?t.trim():typeof window<"u"?window.location.href:"",[t]),a=d.useMemo(()=>s?$({url:s,title:i,imageUrl:m}):null,[s,i,m]);if(!s||!a)return null;const x=typeof navigator<"u"&&typeof navigator.share=="function",p=async()=>{try{if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(s);else{const n=document.createElement("textarea");n.value=s,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}l(!0),window.setTimeout(()=>l(!1),1500)}catch{l(!1)}},h=async()=>{if(x)try{await navigator.share({title:i||"Rivercity",url:s})}catch{}};return e.jsx("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900",children:[e.jsx(S,{className:"h-4 w-4 text-blue-600"}),"Share this article"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[x&&e.jsx(u,{type:"button",size:"sm",variant:"secondary",onClick:h,children:"Share"}),e.jsx(u,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:a.facebook,target:"_blank",rel:"noopener noreferrer",children:"Facebook"})}),e.jsx(u,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:a.twitter,target:"_blank",rel:"noopener noreferrer",children:"X / Twitter"})}),e.jsx(u,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:a.pinterest,target:"_blank",rel:"noopener noreferrer",children:"Pinterest"})}),e.jsx(u,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:a.whatsapp,target:"_blank",rel:"noopener noreferrer",children:"WhatsApp"})}),e.jsxs(u,{type:"button",size:"sm",variant:"outline",onClick:p,children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),o?"Copied":"Copy link"]})]})]})})},z=()=>{const{slug:i}=_(),[t,m]=d.useState(null),[o,l]=d.useState([]),[s,a]=d.useState(!0),x=!f;d.useEffect(()=>{(async()=>{if(x){a(!1);return}try{a(!0);const{data:c,error:g}=await f.from("posts").select("*").eq("slug",i).single();if(g)throw g;m(c);const{data:v,error:y}=await f.from("posts").select("id, slug, title, created_at, featured_image_url, content, meta_description").eq("is_published",!0).neq("slug",i).order("created_at",{ascending:!1}).limit(3);if(y)throw y;l(v||[])}catch(c){console.error("Error fetching post:",c.message)}finally{a(!1)}})()},[i]);const p=r=>{if(r?.meta_description)return r.meta_description;const c=(r?.content||"").replace(/<[^>]+>/g,"");return c.length>140?`${c.substring(0,140)}...`:c};if(s)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});if(x)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Blog content is currently unavailable."});if(!t)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Post not found."});const h=t.content.replace(/<[^>]+>/g,""),n=`https://rivercitybikerentals.com/blog/${t.slug}`,w=typeof window<"u"&&window.location?.href?window.location.href.split("#")[0]:n;return e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsx("title",{children:t.meta_title||t.title}),e.jsx("meta",{name:"description",content:t.meta_description||h.substring(0,160)}),e.jsx("meta",{property:"og:title",content:t.meta_title||t.title}),e.jsx("meta",{property:"og:description",content:t.meta_description||h.substring(0,160)}),t.featured_image_url&&e.jsx("meta",{property:"og:image",content:t.featured_image_url}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("link",{rel:"canonical",href:n})]}),e.jsx(M,{title:t.title,subtitle:`Published on ${j(new Date(t.created_at),"MMMM d, yyyy")}`}),e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[t.featured_image_url&&e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"w-full h-auto object-cover rounded-lg mb-8"}),e.jsx("div",{className:"mb-6",children:e.jsx(L,{title:t.title,url:w,imageUrl:t.featured_image_url})}),e.jsx("div",{className:"my-6 flex justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-[0.3em] text-gray-400 mb-2",children:"Advertisement"}),e.jsx("div",{className:"mx-auto flex h-[70px] w-[340px] items-center justify-center rounded-md border border-dashed border-gray-200 bg-gray-50",children:e.jsx(k,{})})]})}),e.jsx("div",{className:"prose lg:prose-xl max-w-none",dangerouslySetInnerHTML:{__html:t.content}})]}),o.length>0&&e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Recommended posts"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(r=>e.jsxs(C,{to:`/blog/${r.slug}`,className:"group block bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden",children:[e.jsx("div",{className:"relative",children:r.featured_image_url&&e.jsx("img",{src:r.featured_image_url,alt:r.title,className:"w-full h-40 object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:j(new Date(r.created_at),"MMMM d, yyyy")}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-gray-800 group-hover:text-blue-600 transition-colors duration-300",children:r.title}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-3",children:p(r)}),e.jsx("span",{className:"inline-block mt-3 text-blue-600 font-semibold group-hover:underline",children:"Read More â†’"})]})]},r.id))})]})]})})]})};export{z as default};
