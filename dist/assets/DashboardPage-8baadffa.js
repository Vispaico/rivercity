import{c as S,r,b as ke,n as Fe,o as Se,a as X,j as e,p as Ee,q as ee,u as Ae,P as w,t as v,v as Me,R as $,d as H,w as _e,x as Pe,k as Le,y as W,m as B,L as V,B as P}from"./index-b028c7c7.js";import{P as De}from"./PageHeader-40a533bc.js";import{C as N,a as T,b as I,e as C,c as R}from"./card-fb5512d1.js";import{S as Ge}from"./settings-6207bb11.js";const Oe=S("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Z=S("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),Be=S("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),J=S("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Q=S("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var Ve=Fe[" useId ".trim().toString()]||(()=>{}),Ke=0;function te(t){const[a,o]=r.useState(Ve());return ke(()=>{t||o(s=>s??String(Ke++))},[t]),t||(a?`radix-${a}`:"")}var Ue=r.createContext(void 0);function ae(t){const a=r.useContext(Ue);return t||a||"ltr"}var K="rovingFocusGroup.onEntryFocus",$e={bubbles:!1,cancelable:!0},E="RovingFocusGroup",[U,se,He]=Se(E),[Ye,oe]=X(E,[He]),[ze,qe]=Ye(E),ne=r.forwardRef((t,a)=>e.jsx(U.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(U.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(We,{...t,ref:a})})}));ne.displayName=E;var We=r.forwardRef((t,a)=>{const{__scopeRovingFocusGroup:o,orientation:s,loop:c=!1,dir:u,currentTabStopId:i,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:g,onEntryFocus:l,preventScrollOnEntryFocus:n=!1,...d}=t,x=r.useRef(null),A=Ee(a,x),M=ae(u),[_,m]=ee({prop:i,defaultProp:f??null,onChange:g,caller:E}),[p,D]=r.useState(!1),b=Ae(l),y=se(o),G=r.useRef(!1),[Ne,z]=r.useState(0);return r.useEffect(()=>{const h=x.current;if(h)return h.addEventListener(K,b),()=>h.removeEventListener(K,b)},[b]),e.jsx(ze,{scope:o,orientation:s,dir:M,loop:c,currentTabStopId:_,onItemFocus:r.useCallback(h=>m(h),[m]),onItemShiftTab:r.useCallback(()=>D(!0),[]),onFocusableItemAdd:r.useCallback(()=>z(h=>h+1),[]),onFocusableItemRemove:r.useCallback(()=>z(h=>h-1),[]),children:e.jsx(w.div,{tabIndex:p||Ne===0?-1:0,"data-orientation":s,...d,ref:A,style:{outline:"none",...t.style},onMouseDown:v(t.onMouseDown,()=>{G.current=!0}),onFocus:v(t.onFocus,h=>{const Te=!G.current;if(h.target===h.currentTarget&&Te&&!p){const q=new CustomEvent(K,$e);if(h.currentTarget.dispatchEvent(q),!q.defaultPrevented){const O=y().filter(j=>j.focusable),Ie=O.find(j=>j.active),Ce=O.find(j=>j.id===_),Re=[Ie,Ce,...O].filter(Boolean).map(j=>j.ref.current);ce(Re,n)}}G.current=!1}),onBlur:v(t.onBlur,()=>D(!1))})})}),re="RovingFocusGroupItem",ie=r.forwardRef((t,a)=>{const{__scopeRovingFocusGroup:o,focusable:s=!0,active:c=!1,tabStopId:u,children:i,...f}=t,g=te(),l=u||g,n=qe(re,o),d=n.currentTabStopId===l,x=se(o),{onFocusableItemAdd:A,onFocusableItemRemove:M,currentTabStopId:_}=n;return r.useEffect(()=>{if(s)return A(),()=>M()},[s,A,M]),e.jsx(U.ItemSlot,{scope:o,id:l,focusable:s,active:c,children:e.jsx(w.span,{tabIndex:d?0:-1,"data-orientation":n.orientation,...f,ref:a,onMouseDown:v(t.onMouseDown,m=>{s?n.onItemFocus(l):m.preventDefault()}),onFocus:v(t.onFocus,()=>n.onItemFocus(l)),onKeyDown:v(t.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){n.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const p=Qe(m,n.orientation,n.dir);if(p!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let b=x().filter(y=>y.focusable).map(y=>y.ref.current);if(p==="last")b.reverse();else if(p==="prev"||p==="next"){p==="prev"&&b.reverse();const y=b.indexOf(m.currentTarget);b=n.loop?Xe(b,y+1):b.slice(y+1)}setTimeout(()=>ce(b))}}),children:typeof i=="function"?i({isCurrentTabStop:d,hasTabStop:_!=null}):i})})});ie.displayName=re;var Ze={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Je(t,a){return a!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Qe(t,a,o){const s=Je(t.key,o);if(!(a==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(a==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Ze[s]}function ce(t,a=!1){const o=document.activeElement;for(const s of t)if(s===o||(s.focus({preventScroll:a}),document.activeElement!==o))return}function Xe(t,a){return t.map((o,s)=>t[(a+s)%t.length])}var et=ne,tt=ie,L="Tabs",[at,ut]=X(L,[oe]),le=oe(),[st,Y]=at(L),de=r.forwardRef((t,a)=>{const{__scopeTabs:o,value:s,onValueChange:c,defaultValue:u,orientation:i="horizontal",dir:f,activationMode:g="automatic",...l}=t,n=ae(f),[d,x]=ee({prop:s,onChange:c,defaultProp:u??"",caller:L});return e.jsx(st,{scope:o,baseId:te(),value:d,onValueChange:x,orientation:i,dir:n,activationMode:g,children:e.jsx(w.div,{dir:n,"data-orientation":i,...l,ref:a})})});de.displayName=L;var ue="TabsList",me=r.forwardRef((t,a)=>{const{__scopeTabs:o,loop:s=!0,...c}=t,u=Y(ue,o),i=le(o);return e.jsx(et,{asChild:!0,...i,orientation:u.orientation,dir:u.dir,loop:s,children:e.jsx(w.div,{role:"tablist","aria-orientation":u.orientation,...c,ref:a})})});me.displayName=ue;var fe="TabsTrigger",he=r.forwardRef((t,a)=>{const{__scopeTabs:o,value:s,disabled:c=!1,...u}=t,i=Y(fe,o),f=le(o),g=be(i.baseId,s),l=ve(i.baseId,s),n=s===i.value;return e.jsx(tt,{asChild:!0,...f,focusable:!c,active:n,children:e.jsx(w.button,{type:"button",role:"tab","aria-selected":n,"aria-controls":l,"data-state":n?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:g,...u,ref:a,onMouseDown:v(t.onMouseDown,d=>{!c&&d.button===0&&d.ctrlKey===!1?i.onValueChange(s):d.preventDefault()}),onKeyDown:v(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(s)}),onFocus:v(t.onFocus,()=>{const d=i.activationMode!=="manual";!n&&!c&&d&&i.onValueChange(s)})})})});he.displayName=fe;var ge="TabsContent",xe=r.forwardRef((t,a)=>{const{__scopeTabs:o,value:s,forceMount:c,children:u,...i}=t,f=Y(ge,o),g=be(f.baseId,s),l=ve(f.baseId,s),n=s===f.value,d=r.useRef(n);return r.useEffect(()=>{const x=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(x)},[]),e.jsx(Me,{present:c||n,children:({present:x})=>e.jsx(w.div,{"data-state":n?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":g,hidden:!x,id:l,tabIndex:0,...i,ref:a,style:{...t.style,animationDuration:d.current?"0s":void 0},children:x&&u})})});xe.displayName=ge;function be(t,a){return`${t}-trigger-${a}`}function ve(t,a){return`${t}-content-${a}`}var ot=de,pe=me,ye=he,je=xe;const nt=ot,we=$.forwardRef(({className:t,...a},o)=>e.jsx(pe,{ref:o,className:H("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a}));we.displayName=pe.displayName;const k=$.forwardRef(({className:t,...a},o)=>e.jsx(ye,{ref:o,className:H("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a}));k.displayName=ye.displayName;const F=$.forwardRef(({className:t,...a},o)=>e.jsx(je,{ref:o,className:H("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a}));F.displayName=je.displayName;const mt=()=>{const{user:t,signOut:a,loading:o,isAdmin:s}=_e(),[c,u]=r.useState(!1),i=Pe(),{toast:f}=Le(),g=async()=>{u(!0);try{const{error:l}=await a();if(l)throw l;f({title:"Logged Out",description:"You have been successfully logged out.",className:"bg-blue-500 text-white"}),i("/")}catch(l){f({title:"Logout Failed",description:l.message||"Could not log you out.",variant:"destructive"})}finally{u(!1)}};return o?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(W,{className:"h-12 w-12 animate-spin text-blue-600"})}):e.jsxs("div",{children:[e.jsx(De,{title:`Welcome, ${t?.user_metadata?.full_name||t?.email||"Rider"}!`,subtitle:"Manage your bookings, view history, and update your profile.",breadcrumbs:[{name:"Home",link:"/"},{name:"Dashboard"}]}),e.jsx("section",{className:"pt-24 pb-16 lg:pb-24 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[s&&e.jsx(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-8",children:e.jsxs(N,{className:"shadow-lg bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:[e.jsxs(T,{children:[e.jsx(I,{children:"Admin Tools"}),e.jsx(C,{className:"text-blue-100",children:"Access special management sections."})]}),e.jsx(R,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(V,{to:"/dashboard/blog",children:e.jsxs(P,{className:"bg-white text-blue-600 hover:bg-blue-50 font-semibold",children:[e.jsx(J,{className:"mr-2 h-4 w-4"})," Manage Blog Posts"]})}),e.jsx(V,{to:"/dashboard/vehicles",children:e.jsxs(P,{className:"bg-white text-blue-600 hover:bg-blue-50 font-semibold",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"})," Manage Vehicle Inventory"]})})]})})]})}),e.jsxs(nt,{defaultValue:"bookings",className:"w-full",children:[e.jsx(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsxs(we,{className:"grid w-full grid-cols-2 md:grid-cols-4 mb-8 bg-white shadow-sm",children:[e.jsxs(k,{value:"bookings",className:"py-3 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 data-[state=active]:shadow-md",children:[e.jsx(Z,{className:"mr-2 h-5 w-5"})," My Bookings"]}),e.jsxs(k,{value:"history",className:"py-3 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 data-[state=active]:shadow-md",children:[e.jsx(Oe,{className:"mr-2 h-5 w-5"})," Rental History"]}),e.jsxs(k,{value:"profile",className:"py-3 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 data-[state=active]:shadow-md",children:[e.jsx(Q,{className:"mr-2 h-5 w-5"})," Profile"]}),e.jsxs(k,{value:"settings",className:"py-3 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 data-[state=active]:shadow-md",children:[e.jsx(Ge,{className:"mr-2 h-5 w-5"})," Settings"]})]})}),e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[e.jsx(F,{value:"bookings",children:e.jsxs(N,{className:"shadow-lg",children:[e.jsxs(T,{children:[e.jsx(I,{children:"Current & Upcoming Bookings"}),e.jsx(C,{children:"Manage your active and future rentals."})]}),e.jsx(R,{className:"space-y-4",children:e.jsxs("p",{className:"text-gray-600",children:["You have no upcoming bookings. ",e.jsx(V,{to:"/motorbikes",className:"text-blue-600 hover:underline",children:"Book a new ride?"})]})})]})}),e.jsx(F,{value:"history",children:e.jsxs(N,{className:"shadow-lg",children:[e.jsxs(T,{children:[e.jsx(I,{children:"Rental History"}),e.jsx(C,{children:"View your past rentals with us."})]}),e.jsx(R,{className:"space-y-4",children:e.jsx("p",{className:"text-gray-600",children:"Your rental history is empty."})})]})}),e.jsx(F,{value:"profile",children:e.jsxs(N,{className:"shadow-lg",children:[e.jsxs(T,{children:[e.jsx(I,{children:"Your Profile"}),e.jsx(C,{children:"Update your personal information and preferences."})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Q,{className:"h-10 w-10 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:t?.user_metadata?.full_name||"N/A"}),e.jsx("p",{className:"text-sm text-gray-500",children:t?.email})]})]}),e.jsxs(P,{variant:"outline",disabled:!0,children:[e.jsx(J,{className:"mr-2 h-4 w-4"})," Edit Profile (Coming Soon)"]})]})]})}),e.jsx(F,{value:"settings",children:e.jsxs(N,{className:"shadow-lg",children:[e.jsxs(T,{children:[e.jsx(I,{children:"Account Settings"}),e.jsx(C,{children:"Manage your account preferences and security."})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Account settings are not yet implemented."}),e.jsxs(P,{onClick:g,variant:"destructive",disabled:c,children:[c?e.jsx(W,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Be,{className:"mr-2 h-4 w-4"}),"Log Out"]})]})]})})]})]})]})})]})};export{mt as default};
