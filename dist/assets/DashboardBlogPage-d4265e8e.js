import{r as a,j as e,L as x,s as d}from"./index-9c4f7c0c.js";import{f as g}from"./format-8d28430c.js";import"./differenceInCalendarDays-6447d4da.js";const f=()=>{const[l,o]=a.useState([]),[b,n]=a.useState(!0),[c,i]=a.useState(null);a.useEffect(()=>{(async()=>{if(!d){i("Supabase is not configured."),n(!1);return}try{const{data:t,error:s}=await d.from("posts").select("*").order("created_at",{ascending:!1});if(s)throw s;o(t)}catch(t){console.error("Error fetching posts:",t.message),i(t.message)}finally{n(!1)}})()},[]);const h=async r=>{if(!d){i("Supabase is not configured.");return}if(window.confirm("Are you sure you want to delete this post?"))try{const{error:t}=await d.from("posts").delete().eq("id",r);if(t)throw t;o(l.filter(s=>s.id!==r)),alert("Post deleted successfully!")}catch(t){console.error("Error deleting post:",t.message),alert("Failed to delete post.")}};return b?e.jsx("div",{children:"Loading posts..."}):c?e.jsx("div",{className:"p-28",children:c}):e.jsxs("div",{className:"p-28",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Manage Blog Posts"}),e.jsx(x,{to:"/dashboard/blog/new",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"+ New Post"})]}),e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full leading-normal",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100"})]})}),e.jsx("tbody",{children:l.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:r.title})}),e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:`relative inline-block px-3 py-1 font-semibold leading-tight ${r.is_published?"text-green-900":"text-yellow-900"}`,children:[e.jsx("span",{"aria-hidden":!0,className:`absolute inset-0 ${r.is_published?"bg-green-200":"bg-yellow-200"} opacity-50 rounded-full`}),e.jsx("span",{className:"relative",children:r.is_published?"Published":"Draft"})]})}),e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:g(new Date(r.created_at),"yyyy-MM-dd")})}),e.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-right",children:[e.jsx(x,{to:`/dashboard/blog/edit/${r.id}`,className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>h(r.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},r.id))})]})})]})};export{f as default};
