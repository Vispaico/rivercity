import{c as f,r as d,j as e,B as l,k as y,H as g,s as h}from"./index-84352bbf.js";import{P as j}from"./PageHeader-22d55afd.js";import{A as b}from"./AdBanner-c49429f4.js";import{f as w}from"./format-8d28430c.js";import"./differenceInCalendarDays-6447d4da.js";const v=f("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),k=f("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),_=({url:i,title:t,imageUrl:c})=>{const o=encodeURIComponent(i),a=encodeURIComponent(t||""),r=encodeURIComponent(c||""),s=encodeURIComponent(t||"");return{facebook:`https://www.facebook.com/sharer/sharer.php?u=${o}`,twitter:`https://twitter.com/intent/tweet?url=${o}&text=${a}`,pinterest:`https://pinterest.com/pin/create/button/?url=${o}&media=${r}&description=${s}`,whatsapp:`https://wa.me/?text=${a}%20${o}`}},N=({title:i,url:t,imageUrl:c})=>{const[o,a]=d.useState(!1),r=d.useMemo(()=>typeof t=="string"&&t.trim()?t.trim():typeof window<"u"?window.location.href:"",[t]),s=d.useMemo(()=>r?_({url:r,title:i,imageUrl:c}):null,[r,i,c]);if(!r||!s)return null;const m=typeof navigator<"u"&&typeof navigator.share=="function",u=async()=>{try{if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(r);else{const n=document.createElement("textarea");n.value=r,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}a(!0),window.setTimeout(()=>a(!1),1500)}catch{a(!1)}},p=async()=>{if(m)try{await navigator.share({title:i||"Rivercity",url:r})}catch{}};return e.jsx("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900",children:[e.jsx(k,{className:"h-4 w-4 text-blue-600"}),"Share this article"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[m&&e.jsx(l,{type:"button",size:"sm",variant:"secondary",onClick:p,children:"Share"}),e.jsx(l,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:s.facebook,target:"_blank",rel:"noopener noreferrer",children:"Facebook"})}),e.jsx(l,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:s.twitter,target:"_blank",rel:"noopener noreferrer",children:"X / Twitter"})}),e.jsx(l,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:s.pinterest,target:"_blank",rel:"noopener noreferrer",children:"Pinterest"})}),e.jsx(l,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:s.whatsapp,target:"_blank",rel:"noopener noreferrer",children:"WhatsApp"})}),e.jsxs(l,{type:"button",size:"sm",variant:"outline",onClick:u,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),o?"Copied":"Copy link"]})]})]})})},U=()=>{const{slug:i}=y(),[t,c]=d.useState(null),[o,a]=d.useState(!0),r=!h;if(d.useEffect(()=>{(async()=>{if(r){a(!1);return}try{const{data:n,error:x}=await h.from("posts").select("*").eq("slug",i).single();if(x)throw x;c(n)}catch(n){console.error("Error fetching post:",n.message)}finally{a(!1)}})()},[i]),o)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});if(r)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Blog content is currently unavailable."});if(!t)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Post not found."});const s=t.content.replace(/<[^>]+>/g,""),m=`https://rivercitybikerentals.com/blog/${t.slug}`,u=typeof window<"u"&&window.location?.href?window.location.href.split("#")[0]:m;return e.jsxs(e.Fragment,{children:[e.jsxs(g,{children:[e.jsx("title",{children:t.meta_title||t.title}),e.jsx("meta",{name:"description",content:t.meta_description||s.substring(0,160)}),e.jsx("meta",{property:"og:title",content:t.meta_title||t.title}),e.jsx("meta",{property:"og:description",content:t.meta_description||s.substring(0,160)}),t.featured_image_url&&e.jsx("meta",{property:"og:image",content:t.featured_image_url}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("link",{rel:"canonical",href:m})]}),e.jsx(j,{title:t.title,subtitle:`Published on ${w(new Date(t.created_at),"MMMM d, yyyy")}`}),e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8",children:[t.featured_image_url&&e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"w-full h-auto object-cover rounded-lg mb-8"}),e.jsx("div",{className:"mb-6",children:e.jsx(N,{title:t.title,url:u,imageUrl:t.featured_image_url})}),e.jsx("div",{className:"my-6 flex justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-[0.3em] text-gray-400 mb-2",children:"Advertisement"}),e.jsx("div",{className:"mx-auto flex h-[70px] w-[340px] items-center justify-center rounded-md border border-dashed border-gray-200 bg-gray-50",children:e.jsx(b,{})})]})}),e.jsx("div",{className:"prose lg:prose-xl max-w-none",dangerouslySetInnerHTML:{__html:t.content}})]})})]})};export{U as default};
