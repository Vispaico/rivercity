import{r as c,b as z,J as S,j as s,P as _,F as N,G,K as H,z as K,R as U,e as w}from"./index-41fdcd60.js";import{C as X}from"./check-1c74c863.js";function J(e){const r=c.useRef({value:e,previous:e});return c.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}var y="Checkbox",[$,te]=z(y),[Q,P]=$(y);function V(e){const{__scopeCheckbox:r,checked:o,children:l,defaultChecked:a,disabled:t,form:p,name:b,onCheckedChange:d,required:k,value:C="on",internal_do_not_use_render:u}=e,[f,v]=K({prop:o,defaultProp:a??!1,onChange:d,caller:y}),[m,x]=c.useState(null),[g,n]=c.useState(null),i=c.useRef(!1),R=m?!!p||!!m.closest("form"):!0,E={checked:f,disabled:t,setChecked:v,control:m,setControl:x,name:b,form:p,value:C,hasConsumerStoppedPropagationRef:i,required:k,defaultChecked:h(a)?!1:a,isFormControl:R,bubbleInput:g,setBubbleInput:n};return s.jsx(Q,{scope:r,...E,children:W(u)?u(E):l})}var B="CheckboxTrigger",M=c.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:o,...l},a)=>{const{control:t,value:p,disabled:b,checked:d,required:k,setControl:C,setChecked:u,hasConsumerStoppedPropagationRef:f,isFormControl:v,bubbleInput:m}=P(B,e),x=S(a,C),g=c.useRef(d);return c.useEffect(()=>{const n=t?.form;if(n){const i=()=>u(g.current);return n.addEventListener("reset",i),()=>n.removeEventListener("reset",i)}},[t,u]),s.jsx(_.button,{type:"button",role:"checkbox","aria-checked":h(d)?"mixed":d,"aria-required":k,"data-state":D(d),"data-disabled":b?"":void 0,disabled:b,value:p,...l,ref:x,onKeyDown:N(r,n=>{n.key==="Enter"&&n.preventDefault()}),onClick:N(o,n=>{u(i=>h(i)?!0:!i),m&&v&&(f.current=n.isPropagationStopped(),f.current||n.stopPropagation())})})});M.displayName=B;var I=c.forwardRef((e,r)=>{const{__scopeCheckbox:o,name:l,checked:a,defaultChecked:t,required:p,disabled:b,value:d,onCheckedChange:k,form:C,...u}=e;return s.jsx(V,{__scopeCheckbox:o,checked:a,defaultChecked:t,disabled:b,required:p,onCheckedChange:k,name:l,form:C,value:d,internal_do_not_use_render:({isFormControl:f})=>s.jsxs(s.Fragment,{children:[s.jsx(M,{...u,ref:r,__scopeCheckbox:o}),f&&s.jsx(F,{__scopeCheckbox:o})]})})});I.displayName=y;var T="CheckboxIndicator",q=c.forwardRef((e,r)=>{const{__scopeCheckbox:o,forceMount:l,...a}=e,t=P(T,o);return s.jsx(G,{present:l||h(t.checked)||t.checked===!0,children:s.jsx(_.span,{"data-state":D(t.checked),"data-disabled":t.disabled?"":void 0,...a,ref:r,style:{pointerEvents:"none",...e.style}})})});q.displayName=T;var A="CheckboxBubbleInput",F=c.forwardRef(({__scopeCheckbox:e,...r},o)=>{const{control:l,hasConsumerStoppedPropagationRef:a,checked:t,defaultChecked:p,required:b,disabled:d,name:k,value:C,form:u,bubbleInput:f,setBubbleInput:v}=P(A,e),m=S(o,v),x=J(t),g=H(l);c.useEffect(()=>{const i=f;if(!i)return;const R=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(R,"checked").set,L=!a.current;if(x!==t&&j){const O=new Event("click",{bubbles:L});i.indeterminate=h(t),j.call(i,h(t)?!1:t),i.dispatchEvent(O)}},[f,x,t,a]);const n=c.useRef(h(t)?!1:t);return s.jsx(_.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??n.current,required:b,disabled:d,name:k,value:C,form:u,...r,tabIndex:-1,ref:m,style:{...r.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});F.displayName=A;function W(e){return typeof e=="function"}function h(e){return e==="indeterminate"}function D(e){return h(e)?"indeterminate":e?"checked":"unchecked"}const Y=U.forwardRef(({className:e,...r},o)=>s.jsx(I,{ref:o,className:w("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:s.jsx(q,{className:w("flex items-center justify-center text-current"),children:s.jsx(X,{className:"h-4 w-4"})})}));Y.displayName=I.displayName;export{Y as C};
