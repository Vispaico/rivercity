import{c as y,r as i,j as e,B as u,k as g,H as j,s as h}from"./index-da0741cf.js";import{P as b}from"./PageHeader-d797ef09.js";import{f as w}from"./format-8d28430c.js";import"./differenceInCalendarDays-6447d4da.js";const v=y("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),k=y("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),N=({url:o,title:t,imageUrl:m})=>{const c=encodeURIComponent(o),a=encodeURIComponent(t||""),n=encodeURIComponent(m||""),s=encodeURIComponent(t||"");return{facebook:`https://www.facebook.com/sharer/sharer.php?u=${c}`,twitter:`https://twitter.com/intent/tweet?url=${c}&text=${a}`,pinterest:`https://pinterest.com/pin/create/button/?url=${c}&media=${n}&description=${s}`,whatsapp:`https://wa.me/?text=${a}%20${c}`}},_=({title:o,url:t,imageUrl:m})=>{const[c,a]=i.useState(!1),n=i.useMemo(()=>typeof t=="string"&&t.trim()?t.trim():typeof window<"u"?window.location.href:"",[t]),s=i.useMemo(()=>n?N({url:n,title:o,imageUrl:m}):null,[n,o,m]);if(!n||!s)return null;const p=typeof navigator<"u"&&typeof navigator.share=="function",f=async()=>{try{if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(n);else{const r=document.createElement("textarea");r.value=n,r.setAttribute("readonly",""),r.style.position="absolute",r.style.left="-9999px",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}a(!0),window.setTimeout(()=>a(!1),1500)}catch{a(!1)}},x=async()=>{if(p)try{await navigator.share({title:o||"Rivercity",url:n})}catch{}};return e.jsx("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900",children:[e.jsx(k,{className:"h-4 w-4 text-blue-600"}),"Share this article"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[p&&e.jsx(u,{type:"button",size:"sm",variant:"secondary",onClick:x,children:"Share"}),e.jsx(u,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:s.facebook,target:"_blank",rel:"noopener noreferrer",children:"Facebook"})}),e.jsx(u,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:s.twitter,target:"_blank",rel:"noopener noreferrer",children:"X / Twitter"})}),e.jsx(u,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:s.pinterest,target:"_blank",rel:"noopener noreferrer",children:"Pinterest"})}),e.jsx(u,{asChild:!0,size:"sm",variant:"outline",children:e.jsx("a",{href:s.whatsapp,target:"_blank",rel:"noopener noreferrer",children:"WhatsApp"})}),e.jsxs(u,{type:"button",size:"sm",variant:"outline",onClick:f,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),c?"Copied":"Copy link"]})]})]})})},P=()=>{const{slug:o}=g(),[t,m]=i.useState(null),[c,a]=i.useState(!0),n=!h,s=i.useRef(null);if(i.useEffect(()=>{(async()=>{if(n){a(!1);return}try{const{data:l,error:d}=await h.from("posts").select("*").eq("slug",o).single();if(d)throw d;m(l)}catch(l){console.error("Error fetching post:",l.message)}finally{a(!1)}})()},[o]),i.useEffect(()=>{if(!t)return;const r=s.current;if(!r)return;r.innerHTML="";const l=document.createElement("script");l.type="text/javascript",l.innerHTML=`
      atOptions = {
        key: 'b612b7529555730cbd4d2a6607dff9b5',
        format: 'iframe',
        height: 50,
        width: 320,
        params: {}
      };
    `;const d=document.createElement("script");return d.type="text/javascript",d.src="//prototypesorting.com/b612b7529555730cbd4d2a6607dff9b5/invoke.js",d.async=!0,r.appendChild(l),r.appendChild(d),()=>{r.innerHTML="",window.atOptions&&delete window.atOptions}},[t?.id]),c)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});if(n)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Blog content is currently unavailable."});if(!t)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Post not found."});const p=t.content.replace(/<[^>]+>/g,""),f=`https://rivercitybikerentals.com/blog/${t.slug}`,x=i.useMemo(()=>typeof window<"u"&&window.location?.href?window.location.href.split("#")[0]:f,[f]);return e.jsxs(e.Fragment,{children:[e.jsxs(j,{children:[e.jsx("title",{children:t.meta_title||t.title}),e.jsx("meta",{name:"description",content:t.meta_description||p.substring(0,160)}),e.jsx("meta",{property:"og:title",content:t.meta_title||t.title}),e.jsx("meta",{property:"og:description",content:t.meta_description||p.substring(0,160)}),t.featured_image_url&&e.jsx("meta",{property:"og:image",content:t.featured_image_url}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("link",{rel:"canonical",href:f})]}),e.jsx(b,{title:t.title,subtitle:`Published on ${w(new Date(t.created_at),"MMMM d, yyyy")}`}),e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8",children:[t.featured_image_url&&e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"w-full h-auto object-cover rounded-lg mb-8"}),e.jsx("div",{className:"mb-6",children:e.jsx(_,{title:t.title,url:x,imageUrl:t.featured_image_url})}),e.jsx("div",{className:"my-6 flex justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-[0.3em] text-gray-400 mb-2",children:"Advertisement"}),e.jsx("div",{ref:s,className:"mx-auto flex h-[70px] w-[340px] items-center justify-center rounded-md border border-dashed border-gray-200 bg-gray-50",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Loading adâ€¦"})})]})}),e.jsx("div",{className:"prose lg:prose-xl max-w-none",dangerouslySetInnerHTML:{__html:t.content}})]})})]})};export{P as default};
