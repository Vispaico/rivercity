import{r as s,s as r,j as e,L as g}from"./index-9a41d5a6.js";import{f}from"./format-8d28430c.js";const b=a=>String(a||"").replace(/<[^>]+>/g,""),N=({title:a="Fresh from the blog",subtitle:n,limit:d=6})=>{const[c,u]=s.useState([]),[h,l]=s.useState(!!r),[m,p]=s.useState(null);return s.useEffect(()=>{let t=!1;return(async()=>{if(!r){l(!1);return}try{l(!0);const{data:o,error:x}=await r.from("posts").select("id, slug, title, created_at, featured_image_url, content, meta_description").eq("is_published",!0).order("created_at",{ascending:!1}).limit(d);if(x)throw x;t||u(o||[])}catch(o){t||p(o?.message||"Could not load posts.")}finally{t||l(!1)}})(),()=>{t=!0}},[d]),e.jsxs("section",{className:"mt-14",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-extrabold text-gray-900",children:a}),n&&e.jsx("p",{className:"mt-1 text-gray-600",children:n})]}),e.jsx(g,{to:"/blog",className:"text-sm font-semibold text-blue-700 hover:underline",children:"See all blog posts →"})]}),h?e.jsx("p",{className:"mt-6 text-sm text-gray-600",children:"Loading posts…"}):r?m?e.jsx("div",{className:"mt-6 rounded-2xl border border-red-200 bg-red-50 p-6",children:e.jsx("p",{className:"text-sm text-red-800",children:m})}):c.length===0?e.jsx("div",{className:"mt-6 rounded-2xl border bg-gray-50 p-6",children:e.jsx("p",{className:"text-sm text-gray-700",children:"No published blog posts found yet. Once you publish posts, they’ll appear here automatically."})}):e.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(t=>{const i=(t.meta_description||b(t.content)).slice(0,140);return e.jsxs(g,{to:`/blog/${t.slug}`,className:"group overflow-hidden rounded-2xl border bg-white shadow-sm transition-all hover:-translate-y-1 hover:shadow-xl",children:[t.featured_image_url?e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"h-44 w-full object-cover transition-transform duration-500 group-hover:scale-[1.03]",loading:"lazy"}):e.jsx("div",{className:"h-44 w-full bg-gradient-to-br from-blue-100 to-gray-100"}),e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-gray-500",children:t.created_at?f(new Date(t.created_at),"MMM d, yyyy"):"—"}),e.jsx("h4",{className:"mt-2 text-lg font-bold text-gray-900 group-hover:text-blue-700",children:t.title}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[i,i.length>=140?"…":""]}),e.jsx("div",{className:"mt-4 text-sm font-semibold text-blue-700",children:"Read →"})]})]},t.id)})}):e.jsxs("div",{className:"mt-6 rounded-2xl border bg-gray-50 p-6",children:[e.jsx("p",{className:"text-sm text-gray-700",children:"Blog posts are currently unavailable (Supabase isn’t configured in this environment)."}),e.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"On the live site, this section will automatically show only the posts that exist."})]})]})};export{N as G};
