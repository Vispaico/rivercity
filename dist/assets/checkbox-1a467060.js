import{r as c,b as H,a as L,D as N,j as i,P as S,F as j,G,E as K,R as U,d as w}from"./index-4ed6c61b.js";import{C as W}from"./check-038a07f8.js";function X(e){const r=c.useRef({value:e,previous:e});return c.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}function $(e){const[r,o]=c.useState(void 0);return H(()=>{if(e){o({width:e.offsetWidth,height:e.offsetHeight});const d=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const t=n[0];let u,f;if("borderBoxSize"in t){const s=t.borderBoxSize,b=Array.isArray(s)?s[0]:s;u=b.inlineSize,f=b.blockSize}else u=e.offsetWidth,f=e.offsetHeight;o({width:u,height:f})});return d.observe(e,{box:"border-box"}),()=>d.unobserve(e)}else o(void 0)},[e]),r}var g="Checkbox",[J,re]=L(g),[Q,_]=J(g);function V(e){const{__scopeCheckbox:r,checked:o,children:d,defaultChecked:n,disabled:t,form:u,name:f,onCheckedChange:s,required:b,value:C="on",internal_do_not_use_render:h}=e,[p,v]=K({prop:o,defaultProp:n??!1,onChange:s,caller:g}),[x,m]=c.useState(null),[y,a]=c.useState(null),l=c.useRef(!1),R=x?!!u||!!x.closest("form"):!0,E={checked:p,disabled:t,setChecked:v,control:x,setControl:m,name:f,form:u,value:C,hasConsumerStoppedPropagationRef:l,required:b,defaultChecked:k(n)?!1:n,isFormControl:R,bubbleInput:y,setBubbleInput:a};return i.jsx(Q,{scope:r,...E,children:Y(h)?h(E):d})}var z="CheckboxTrigger",B=c.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:o,...d},n)=>{const{control:t,value:u,disabled:f,checked:s,required:b,setControl:C,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:v,bubbleInput:x}=_(z,e),m=N(n,C),y=c.useRef(s);return c.useEffect(()=>{const a=t?.form;if(a){const l=()=>h(y.current);return a.addEventListener("reset",l),()=>a.removeEventListener("reset",l)}},[t,h]),i.jsx(S.button,{type:"button",role:"checkbox","aria-checked":k(s)?"mixed":s,"aria-required":b,"data-state":q(s),"data-disabled":f?"":void 0,disabled:f,value:u,...d,ref:m,onKeyDown:j(r,a=>{a.key==="Enter"&&a.preventDefault()}),onClick:j(o,a=>{h(l=>k(l)?!0:!l),x&&v&&(p.current=a.isPropagationStopped(),p.current||a.stopPropagation())})})});B.displayName=z;var P=c.forwardRef((e,r)=>{const{__scopeCheckbox:o,name:d,checked:n,defaultChecked:t,required:u,disabled:f,value:s,onCheckedChange:b,form:C,...h}=e;return i.jsx(V,{__scopeCheckbox:o,checked:n,defaultChecked:t,disabled:f,required:u,onCheckedChange:b,name:d,form:C,value:s,internal_do_not_use_render:({isFormControl:p})=>i.jsxs(i.Fragment,{children:[i.jsx(B,{...h,ref:r,__scopeCheckbox:o}),p&&i.jsx(T,{__scopeCheckbox:o})]})})});P.displayName=g;var A="CheckboxIndicator",M=c.forwardRef((e,r)=>{const{__scopeCheckbox:o,forceMount:d,...n}=e,t=_(A,o);return i.jsx(G,{present:d||k(t.checked)||t.checked===!0,children:i.jsx(S.span,{"data-state":q(t.checked),"data-disabled":t.disabled?"":void 0,...n,ref:r,style:{pointerEvents:"none",...e.style}})})});M.displayName=A;var O="CheckboxBubbleInput",T=c.forwardRef(({__scopeCheckbox:e,...r},o)=>{const{control:d,hasConsumerStoppedPropagationRef:n,checked:t,defaultChecked:u,required:f,disabled:s,name:b,value:C,form:h,bubbleInput:p,setBubbleInput:v}=_(O,e),x=N(o,v),m=X(t),y=$(d);c.useEffect(()=>{const l=p;if(!l)return;const R=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(R,"checked").set,D=!n.current;if(m!==t&&I){const F=new Event("click",{bubbles:D});l.indeterminate=k(t),I.call(l,k(t)?!1:t),l.dispatchEvent(F)}},[p,m,t,n]);const a=c.useRef(k(t)?!1:t);return i.jsx(S.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??a.current,required:f,disabled:s,name:b,value:C,form:h,...r,tabIndex:-1,ref:x,style:{...r.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});T.displayName=O;function Y(e){return typeof e=="function"}function k(e){return e==="indeterminate"}function q(e){return k(e)?"indeterminate":e?"checked":"unchecked"}const Z=U.forwardRef(({className:e,...r},o)=>i.jsx(P,{ref:o,className:w("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:i.jsx(M,{className:w("flex items-center justify-center text-current"),children:i.jsx(W,{className:"h-4 w-4"})})}));Z.displayName=P.displayName;export{Z as C};
